function encryptText(text) {
    //eliminate spaces from text
    const modifiedText = text.replace(/\s/g, '');

    //verify if text exists
    if (modifiedText.length === 0) {
        return "The text cannot be empty!";
    }

    //calculate the length of the modified text
    const L = modifiedText.length;

    //determine the number of rows and cols
    let row = Math.floor(Math.sqrt(L));
    let column = Math.ceil(Math.sqrt(L));

    //ensure that the number of columns is at least as long as the last line
    while (row * column < L) {
        row++;
    }

    //building the grid
    let grid = [];
    let currentIndex = 0;
    for (let i = 0; i < row; i++) {
        let rowText = '';
        for (let j = 0; j < column; j++) {
            if (currentIndex < L) {
                rowText += modifiedText[currentIndex];
                currentIndex++;
            }
        }
        grid.push(rowText);
    }

    //building encrypted text 
    let encryptedText = '';
    for (let i = 0; i < row; i++) {
        encryptedText += grid[i];
        if (i !== row - 1) {
            encryptedText += ' ';
        }
    }

    return encryptedText;
}

//example
const plaintext = "if man was meant to stay on the ground god would have given us roots.";
const encrypted = encryptText(plaintext);
console.log("Encrypted text: \n", encrypted);
